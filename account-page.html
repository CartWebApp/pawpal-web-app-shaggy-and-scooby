<!DOCTYPE html>
<html lang="en">

<head>
    <title>Account Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type = "image/png" href="pawpal-logo.png">
</head>

<body>
    <nav class="nav">
        <a href="add-plus.html">
            <svg class="nav-button" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                width="24px" fill="#e3e3e3">
                <path d="M440-120v-320H120v-80h320v-320h80v320h320v80H520v320h-80Z" />
            </svg>
        </a>
        <a href="notification.html">
            <svg class="nav-button" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                width="24px" fill="#e3e3e3">
                <path
                    d="M501-500ZM480-80q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM160-200v-80h80v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q29 7 53.5 20.5T639-740l-57 57q-21-17-47-27t-55-10q-66 0-113 47t-47 113v280h480v80H160Zm496-219-56-57q10-10 15-24t5-32q0-18-5-32.5T600-589l56-56q21 21 32.5 50t11.5 63q0 34-11.5 63T656-419Zm43 43q29-29 45-70t16-86q0-45-16-86t-45-70l57-56q41 41 62.5 95.5T840-532q0 62-21.5 116.5T756-320l-57-56Z" />
            </svg>
        </a>
        <a href="grouped-bar.html">
            <svg class="nav-button" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                width="24px" fill="#e3e3e3">
                <path d="M160-160v-480h160v480H160Zm200 0v-280h160v280H360Zm280 0v-640h160v640H640Z" />
            </svg>
        </a>
        <a href="health.html">
            <svg class="nav-button" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                width="24px" fill="#e3e3e3">
                <path
                    d="M480-120 353-234q-72-65-123.5-116t-85-96q-33.5-45-49-87T80-621q0-94 63-156.5T300-840q52 0 99 22t81 62q34-40 81-62t99-22q80 0 145.5 53.5T879-640h-82q-7-66-53-93t-84-27q-51 0-88 27.5T503-660h-46q-31-45-70.5-72.5T300-760q-57 0-98.5 39.5T160-621q0 33 14 67t50 78.5q36 44.5 98 104T480-228l61-53q48-42 104.5-95T741-480h-88v-80h227v226h-80v-91q-41 52-99 106t-107 98L480-120Z" />
            </svg>
        </a>
        <a href="account-page.html">
            <svg class="nav-button" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                width="24px" fill="#e3e3e3">
                <path
                    d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z" />
            </svg>
        </a>
    </nav>
    <header>
        <img class="banner-photo" src="Images\Bruno Images\not-real-bruno-banner.png">
    </header>
    <figure class="bruno-figure">
        <div>
            <img class="bruno-photo" src="Images\Bruno Images\bruno-photo.svg" width=250px height=250px aspect-ratio="1/1"
                alt="Bruno-photo">
        </div>
        <figcaption>
            <p>Bruno</p>
            <p>Age: 2 years old</p>
            <p>Golden Retriever</p>
        </figcaption> 
    </figure>
    <section class="bruno-bio">
        <h2>Bruno Summary</h2>
        <p class="bruno-bio-p">What Bruno needs for today is his two medications, his 10 minute walk, and 5 chocolate bars!</p>
    </section>
    <section class="main-info">
        <section class="medications">
            <h2 class="main-info-h2">Medications</h2>
            <p class="main-medications-p">Today</p>
            <p class="below-main-meds-p">8:00 a.m</p>
            <input class="checkbox" type="checkbox">
            <p class="below-main-meds-p2">10mg of Famotidine</p>
            <p class="below-main-meds-p">8:00 p.m</p>
            <input class="checkbox" type="checkbox">
            <p class="below-main-meds-p2">5mg of Immunosuppressants</p>
        </section>
        <section class="trends">
            <h2 class="main-info-h2">Trends</h2>
            <p class="below-main-trends">Heart Rate</p>
            <p class="below-main-trends-p">Range</p>
            <p class="below-main-trends-p2">65-165 BPM</p>
            <p class="below-main-trends-p2">October 12-18, 2025</p>
        </section>
    </section>

    

<script>
// JS-only: inject a 'View Other Pets' button over the banner and display pets on click
document.addEventListener('DOMContentLoaded', function () {
  const header = document.querySelector('header');
  const bannerImg = header ? header.querySelector('.banner-photo') : null;
  if (!header || !bannerImg) return;

  // Create the toggle button (styled like other buttons)
  const btn = document.createElement('button');
  btn.id = 'view-other-pets-btn';
  btn.className = 'submit-pet-info';
  btn.type = 'button';
  btn.textContent = 'View Other Pets';
  btn.style.position = 'fixed';
  btn.style.zIndex = '999';

  document.body.appendChild(btn);

    // Stabilize positioning with rAF throttling + resize observer
    let scheduled = false;
    function positionBtnNow() {
        const rect = bannerImg.getBoundingClientRect();
            const padding = 12; // small inset from edges
            const top = window.scrollY + rect.bottom - btn.offsetHeight - padding;
            // Anchor to banner's right edge but clamp within viewport for small screens
            let leftClient = rect.right - btn.offsetWidth - padding; // client coords
            // Clamp within viewport width
            leftClient = Math.min(leftClient, window.innerWidth - btn.offsetWidth - padding);
            leftClient = Math.max(leftClient, padding);
            const left = window.scrollX + leftClient;
            btn.style.top = top + 'px';
            btn.style.left = left + 'px';
        const isVisible = rect.width > 0 && rect.height > 0;
        btn.style.display = isVisible ? 'inline-block' : 'none';
    }
    function schedulePosition() {
        if (scheduled) return;
        scheduled = true;
        requestAnimationFrame(() => {
            scheduled = false;
            positionBtnNow();
        });
    }

  // Initial measure after paint
  requestAnimationFrame(() => {
        positionBtnNow();
  });
    window.addEventListener('resize', schedulePosition);
    window.addEventListener('scroll', schedulePosition, { passive: true });
    // Recalculate when the banner image loads or resizes intrinsically
    if (!bannerImg.complete) {
        bannerImg.addEventListener('load', schedulePosition, { once: true });
    }
    if (window.ResizeObserver) {
        const ro = new ResizeObserver(schedulePosition);
        ro.observe(bannerImg);
    }

        // Floating panel for pets (does not affect layout)
        let panel = null;
        let petsList = null;
        function ensurePanel() {
            if (!panel) {
                panel = document.createElement('div');
                panel.id = 'other-pets-panel';
                panel.style.position = 'fixed';
                panel.style.zIndex = '998';
                panel.style.background = '#fff';
                panel.style.border = '1px solid #ccc';
                panel.style.borderRadius = '12px';
                panel.style.boxShadow = '0 2px 12px rgba(0,0,0,0.12)';
                panel.style.padding = '1rem';
                panel.style.maxWidth = '90vw';
                panel.style.width = 'min(640px, 90vw)';
                panel.style.maxHeight = '60vh';
                panel.style.overflowY = 'auto';
                panel.style.display = 'none';
                document.body.appendChild(panel);

                petsList = document.createElement('section');
                petsList.id = 'pets-list';
                petsList.style.display = 'flex';
                petsList.style.flexWrap = 'wrap';
                petsList.style.gap = '1rem';
                panel.appendChild(petsList);
            }
            return panel;
        }

        function positionPanelNow() {
            if (!panel) return;
                const rect = bannerImg.getBoundingClientRect();
                const padding = 12;
                const top = window.scrollY + rect.bottom + padding; // just below the banner
                // Responsive width/position for <=680px
                const isMobile = window.innerWidth <= 680;
                if (isMobile) {
                    panel.style.maxWidth = 'calc(100vw - 24px)';
                    panel.style.width = 'calc(100vw - 24px)';
                } else {
                    panel.style.maxWidth = '90vw';
                    panel.style.width = 'min(640px, 90vw)';
                }
                // Align right edge with banner/right viewport while clamping within viewport
                let leftClient = rect.right - panel.offsetWidth - padding; // client coords
                leftClient = Math.min(leftClient, window.innerWidth - panel.offsetWidth - padding);
                leftClient = Math.max(leftClient, padding);
                const left = window.scrollX + leftClient;
                panel.style.top = top + 'px';
                panel.style.left = left + 'px';
        }

    function renderPets() {
        ensurePanel();
    const pets = JSON.parse(localStorage.getItem('pets') || '[]');
        petsList.innerHTML = '';
    if (pets.length === 0) {
            const p = document.createElement('p');
            p.textContent = 'No pets added yet.';
            petsList.appendChild(p);
      return;
    }
    pets.forEach(pet => {
      const card = document.createElement('div');
      card.style.border = '1px solid #ccc';
      card.style.borderRadius = '12px';
      card.style.padding = '1rem';
      card.style.background = '#fff';
      card.style.width = '220px';
      card.style.boxShadow = '0 2px 8px rgba(0,0,0,0.07)';
      card.innerHTML = `
        <img src="${pet.image}" alt="${pet.name}" style="width: 100%; height: 180px; object-fit: cover; border-radius: 8px;"/>
        <h3 style="margin: 0.5rem 0 0.2rem 0;">${pet.name}</h3>
        <p style="margin: 0;">Type: ${pet.type}</p>
        <p style="margin: 0;">Breed: ${pet.breed}</p>
      `;
            petsList.appendChild(card);
    });
  }

  btn.addEventListener('click', function(){
        ensurePanel();
        renderPets();
        panel.style.display = 'block';
        // Position panel after content sizes are known
        requestAnimationFrame(() => {
            positionPanelNow();
        });
  });

    // Keep panel aligned on scroll/resize as well
    window.addEventListener('scroll', schedulePosition, { passive: true });
    window.addEventListener('resize', schedulePosition);
    function schedulePanelPosition() { requestAnimationFrame(positionPanelNow); }
    window.addEventListener('scroll', schedulePanelPosition, { passive: true });
    window.addEventListener('resize', schedulePanelPosition);
    // Also react to media query changes if supported
    if (window.matchMedia) {
        const mq = window.matchMedia('(max-width: 680px)');
        mq.addEventListener ? mq.addEventListener('change', schedulePanelPosition) : mq.addListener(schedulePanelPosition);
    }
});
</script>
</body>